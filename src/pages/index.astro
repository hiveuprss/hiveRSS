---
import Base from '../layouts/Base.astro';

const communities = [
  { tag: 'hive-167922', name: 'InLeo',          desc: 'Crypto, finance & economics',   icon: 'üìà', color: '#F5A623' },
  { tag: 'hive-194913', name: 'Photography Lovers', desc: 'Visual storytelling & art',  icon: 'üì∑', color: '#E31337' },
  { tag: 'hive-163772', name: 'Worldmappin',   desc: 'Adventure & discovery',         icon: '‚úàÔ∏è', color: '#4A9EFF' },
  { tag: 'hive-140217', name: 'Hive Gaming',    desc: 'Games, esports & reviews',      icon: 'üéÆ', color: '#7B5EE8' },
  { tag: 'hive-120026', name: 'Music Zone',    desc: 'Artists, sounds & culture',     icon: 'üéµ', color: '#E8845E' },
  { tag: 'hive-170798', name: 'The Ink Well',  desc: 'Stories, essays & poetry',      icon: '‚úçÔ∏è', color: '#4EC994' },
];
---

<Base title="HiveRSS ‚Äî Follow Hive creators in your RSS reader">
  <main>

    <!-- ‚îÄ‚îÄ Hero ‚îÄ‚îÄ -->
    <section class="hero">
      <div class="hero-glow" aria-hidden="true"></div>
      <div class="hero-inner">
        <p class="eyebrow">
          <span class="eyebrow-dot"></span>
          RSS feeds for the Hive blockchain
        </p>
        <h1>Follow your favorite<br /><em>Hive creators</em><br />anywhere you read</h1>
        <p class="hero-sub">
          Enter a username, tag, or community and get a feed URL that works
          in Feedly, NetNewsWire, Inoreader ‚Äî any RSS reader.
        </p>

        <div class="feed-builder">
          <div class="builder-input-row">
            <span class="input-prefix">hiverss.com/</span>
            <input
              id="feed-input"
              type="text"
              placeholder="@username or #tag"
              autocomplete="off"
              spellcheck="false"
              aria-label="Enter a Hive username or tag"
            />
          </div>
          <div class="builder-output">
            <span id="feed-url-display" class="feed-url-text">https://hiverss.com/@username</span>
            <button id="copy-btn" class="copy-btn" aria-label="Copy feed URL">
              <svg id="icon-copy" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="9" y="9" width="13" height="13" rx="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
              <svg id="icon-check" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="display:none">
                <polyline points="20 6 9 17 4 12"></polyline>
              </svg>
              <span id="copy-label">Copy</span>
            </button>
          </div>
          <div class="builder-examples">
            <span class="examples-label">Try:</span>
            <button class="pill" data-value="@taskmaster4450">@taskmaster4450</button>
            <button class="pill" data-value="#photography">#photography</button>
            <button class="pill" data-value="trending/hive">trending/hive</button>
          </div>
        </div>
      </div>

      <div class="hero-visual" aria-hidden="true">
        <div class="feed-card feed-card--1">
          <div class="fc-dot"></div>
          <div class="fc-lines">
            <div class="fc-line fc-line--title"></div>
            <div class="fc-line fc-line--sub"></div>
          </div>
        </div>
        <div class="feed-card feed-card--2">
          <div class="fc-dot"></div>
          <div class="fc-lines">
            <div class="fc-line fc-line--title" style="width:75%"></div>
            <div class="fc-line fc-line--sub" style="width:50%"></div>
          </div>
        </div>
        <div class="feed-card feed-card--3">
          <div class="fc-dot"></div>
          <div class="fc-lines">
            <div class="fc-line fc-line--title" style="width:88%"></div>
            <div class="fc-line fc-line--sub" style="width:60%"></div>
          </div>
        </div>
        <div class="rss-badge">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19.01 7.38 20 6.18 20C4.98 20 4 19.01 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1z"/>
          </svg>
          RSS
        </div>
      </div>
    </section>

    <!-- ‚îÄ‚îÄ Feed patterns ‚îÄ‚îÄ -->
    <section class="patterns">
      <div class="patterns-inner">
        <p class="patterns-label">Feed URL patterns</p>
        <div class="pattern-list">
          <div class="pattern-item">
            <code>/@username</code>
            <span>Author's blog</span>
          </div>
          <div class="pattern-divider"></div>
          <div class="pattern-item">
            <code>/trending/tag</code>
            <span>Tag by trending</span>
          </div>
          <div class="pattern-divider"></div>
          <div class="pattern-item">
            <code>/community/name</code>
            <span>Community feed</span>
          </div>
          <div class="pattern-divider"></div>
          <div class="pattern-item">
            <code>/@username/votes</code>
            <span>Curation feed</span>
          </div>
        </div>
      </div>
    </section>

    <!-- ‚îÄ‚îÄ Communities ‚îÄ‚îÄ -->
    <section class="communities" id="communities">
      <div class="section-inner">
        <div class="section-head">
          <h2>Browse communities</h2>
          <p>Thousands of independent creators writing across every topic ‚Äî no algorithm, no ads.</p>
        </div>
        <div class="community-grid">
          {communities.map(c => (
            <a class="community-card" href={`/community/${c.tag}`} style={`--accent: ${c.color}`}>
              <span class="card-icon">{c.icon}</span>
              <div class="card-body">
                <h3>{c.name}</h3>
                <p>{c.desc}</p>
              </div>
              <span class="card-rss">
                <svg width="13" height="13" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19.01 7.38 20 6.18 20C4.98 20 4 19.01 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1z"/>
                </svg>
              </span>
            </a>
          ))}
        </div>
        <div class="communities-footer">
          <a href="/communities" class="browse-all">
            Browse all communities
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
          </a>
        </div>
      </div>
    </section>

    <!-- ‚îÄ‚îÄ What is Hive ‚îÄ‚îÄ -->
    <section class="about">
      <div class="about-inner">
        <div class="about-badge">What is Hive?</div>
        <h2>A blogging platform where<br /><em>creators own their content</em></h2>
        <p>
          Hive is a decentralized social network where writers, photographers, and
          creators earn cryptocurrency directly from their audience ‚Äî no platform
          taking a cut, no algorithm suppressing your reach.
        </p>
        <p>
          HiveRSS makes Hive content available everywhere. Subscribe to your
          favorite authors and communities in any RSS reader, and stay connected
          without needing a Hive account.
        </p>
        <div class="about-actions">
          <a href="https://signup.hive.io" target="_blank" rel="noopener" class="btn-primary">
            Start writing on Hive
          </a>
          <a href="https://hive.blog" target="_blank" rel="noopener" class="btn-ghost">
            Explore content ‚Üí
          </a>
        </div>
      </div>
    </section>

  </main>
</Base>

<script>
  const input    = document.getElementById('feed-input')    as HTMLInputElement;
  const display  = document.getElementById('feed-url-display')!;
  const copyBtn  = document.getElementById('copy-btn')!;
  const copyLbl  = document.getElementById('copy-label')!;
  const iconCopy = document.getElementById('icon-copy')!;
  const iconChk  = document.getElementById('icon-check')!;

  function buildUrl(val: string): string {
    val = val.trim();
    if (!val) return 'https://hiverss.com/@username';
    if (val.startsWith('@'))  return `https://hiverss.com/${val}`;
    if (val.startsWith('#'))  return `https://hiverss.com/trending/${val.slice(1)}`;
    if (val.includes('/'))    return `https://hiverss.com/${val}`;
    return `https://hiverss.com/@${val}`;
  }

  input.addEventListener('input', () => {
    display.textContent = buildUrl(input.value);
  });

  copyBtn.addEventListener('click', async () => {
    const url = display.textContent || '';
    try {
      await navigator.clipboard.writeText(url);
      iconCopy.style.display = 'none';
      iconChk.style.display  = 'block';
      copyLbl.textContent    = 'Copied!';
      copyBtn.classList.add('copied');
      setTimeout(() => {
        iconCopy.style.display = 'block';
        iconChk.style.display  = 'none';
        copyLbl.textContent    = 'Copy';
        copyBtn.classList.remove('copied');
      }, 2000);
    } catch { /* fallback */ }
  });

  document.querySelectorAll<HTMLButtonElement>('.pill').forEach(btn => {
    btn.addEventListener('click', () => {
      const val = btn.dataset.value || '';
      input.value = val;
      display.textContent = buildUrl(val);
    });
  });
</script>

<style>
  main { flex: 1; }

  /* ‚îÄ‚îÄ Hero ‚îÄ‚îÄ */
  .hero {
    position: relative;
    overflow: hidden;
    display: grid;
    grid-template-columns: 1fr 380px;
    gap: 4rem;
    align-items: center;
    max-width: var(--max-w);
    margin: 0 auto;
    padding: 5rem 2rem 4rem;
  }

  .hero-glow {
    position: absolute;
    top: -80px;
    left: -100px;
    width: 700px;
    height: 600px;
    background: radial-gradient(ellipse at 30% 30%, rgba(227, 19, 55, 0.09) 0%, transparent 65%);
    pointer-events: none;
  }

  .hero-inner { position: relative; z-index: 1; }

  .eyebrow {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.8125rem;
    font-weight: 500;
    letter-spacing: 0.04em;
    text-transform: uppercase;
    color: var(--text-muted);
    margin-bottom: 1.25rem;
  }
  .eyebrow-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--red);
    box-shadow: 0 0 8px var(--red);
    animation: pulse 2s ease-in-out infinite;
  }
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.4; }
  }

  h1 {
    font-size: clamp(2.2rem, 4.5vw, 3.5rem);
    font-weight: 700;
    letter-spacing: -0.02em;
    line-height: 1.2;
    color: var(--text);
    margin-bottom: 1.25rem;
  }
  h1 em {
    font-style: normal;
    color: var(--red);
  }

  .hero-sub {
    font-size: 1.0625rem;
    color: var(--text-muted);
    max-width: 480px;
    margin-bottom: 2.25rem;
    line-height: 1.65;
  }

  /* Feed builder */
  .feed-builder {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 1.25rem;
    max-width: 520px;
  }

  .builder-input-row {
    display: flex;
    align-items: center;
    background: var(--bg);
    border: 1px solid var(--border-bright);
    border-radius: 8px;
    overflow: hidden;
    margin-bottom: 0.75rem;
    transition: border-color 0.15s;
  }
  .builder-input-row:focus-within {
    border-color: var(--red);
    box-shadow: 0 0 0 3px rgba(227, 19, 55, 0.1);
  }

  .input-prefix {
    padding: 0.75rem 0 0.75rem 0.875rem;
    font-size: 0.875rem;
    color: var(--text-dim);
    white-space: nowrap;
    font-family: 'Instrument Sans', monospace;
  }

  #feed-input {
    flex: 1;
    background: none;
    border: none;
    outline: none;
    padding: 0.75rem 0.875rem 0.75rem 0.25rem;
    color: var(--text);
    font-size: 0.9375rem;
    font-family: 'Instrument Sans', sans-serif;
    caret-color: var(--red);
    min-width: 0;
  }
  #feed-input::placeholder { color: var(--text-dim); }

  .builder-output {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.75rem;
    padding: 0.5rem 0 0.875rem;
    border-bottom: 1px solid var(--border);
    margin-bottom: 0.875rem;
  }

  .feed-url-text {
    font-size: 0.8125rem;
    color: var(--amber);
    font-family: 'Instrument Sans', monospace;
    word-break: break-all;
    flex: 1;
  }

  .copy-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.375rem 0.75rem;
    background: var(--surface-2);
    border: 1px solid var(--border-bright);
    border-radius: 6px;
    color: var(--text-muted);
    font-size: 0.8125rem;
    font-family: 'Instrument Sans', sans-serif;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s;
    white-space: nowrap;
    flex-shrink: 0;
  }
  .copy-btn:hover { color: var(--text); border-color: var(--border-bright); background: var(--surface-3); }
  .copy-btn.copied { color: #4EC994; border-color: #4EC994; }

  .builder-examples {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  .examples-label {
    font-size: 0.8rem;
    color: var(--text-dim);
    margin-right: 0.125rem;
  }
  .pill {
    padding: 0.25rem 0.625rem;
    background: var(--surface-2);
    border: 1px solid var(--border-bright);
    border-radius: 999px;
    color: var(--text-muted);
    font-size: 0.8rem;
    font-family: 'Instrument Sans', monospace;
    cursor: pointer;
    transition: all 0.15s;
  }
  .pill:hover { color: var(--text); border-color: var(--red); background: var(--red-dim); }

  /* Hero visual */
  .hero-visual {
    position: relative;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    padding: 1rem;
  }

  .feed-card {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 0.875rem 1rem;
    animation: slideIn 0.5s ease forwards;
    opacity: 0;
  }
  .feed-card--1 { animation-delay: 0.1s; }
  .feed-card--2 { animation-delay: 0.25s; }
  .feed-card--3 { animation-delay: 0.4s; }

  @keyframes slideIn {
    from { opacity: 0; transform: translateX(16px); }
    to   { opacity: 1; transform: translateX(0); }
  }

  .fc-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--red);
    flex-shrink: 0;
    opacity: 0.7;
  }
  .feed-card--2 .fc-dot { background: var(--amber); }
  .feed-card--3 .fc-dot { background: #4EC994; }

  .fc-lines { flex: 1; display: flex; flex-direction: column; gap: 0.375rem; }
  .fc-line { height: 7px; border-radius: 4px; background: var(--surface-3); }
  .fc-line--title { width: 90%; }
  .fc-line--sub { width: 60%; opacity: 0.5; }

  .rss-badge {
    align-self: flex-end;
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.375rem 0.75rem;
    background: rgba(245, 166, 35, 0.1);
    border: 1px solid rgba(245, 166, 35, 0.25);
    border-radius: 999px;
    color: var(--amber);
    font-size: 0.8125rem;
    font-weight: 600;
    font-family: 'Syne', sans-serif;
    margin-top: 0.25rem;
  }

  /* ‚îÄ‚îÄ Patterns bar ‚îÄ‚îÄ */
  .patterns {
    border-top: 1px solid var(--border);
    border-bottom: 1px solid var(--border);
    background: var(--surface);
  }
  .patterns-inner {
    max-width: var(--max-w);
    margin: 0 auto;
    padding: 1.25rem 2rem;
    display: flex;
    align-items: center;
    gap: 2rem;
    flex-wrap: wrap;
  }
  .patterns-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--text-dim);
    white-space: nowrap;
  }
  .pattern-list {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
    flex: 1;
  }
  .pattern-item {
    display: flex;
    align-items: center;
    gap: 0.625rem;
  }
  .pattern-item code {
    font-family: 'Instrument Sans', monospace;
    font-size: 0.8125rem;
    color: var(--amber);
    background: var(--amber-dim);
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    border: 1px solid rgba(245, 166, 35, 0.15);
  }
  .pattern-item span {
    font-size: 0.8125rem;
    color: var(--text-muted);
  }
  .pattern-divider {
    width: 1px;
    height: 1.25rem;
    background: var(--border-bright);
  }

  /* ‚îÄ‚îÄ Communities ‚îÄ‚îÄ */
  .communities { padding: 5rem 2rem; }
  .section-inner { max-width: var(--max-w); margin: 0 auto; }

  .section-head {
    margin-bottom: 2.5rem;
  }
  .section-head h2 {
    font-size: clamp(1.75rem, 3vw, 2.5rem);
    font-weight: 800;
    letter-spacing: -0.025em;
    margin-bottom: 0.6rem;
  }
  .section-head p {
    font-size: 1rem;
    color: var(--text-muted);
    max-width: 480px;
  }

  .community-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
  }

  .community-card {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1.125rem 1.25rem;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    transition: all 0.18s ease;
    position: relative;
    overflow: hidden;
  }
  .community-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, color-mix(in srgb, var(--accent) 8%, transparent), transparent 60%);
    opacity: 0;
    transition: opacity 0.18s;
  }
  .community-card:hover {
    border-color: var(--accent);
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0,0,0,0.3);
  }
  .community-card:hover::before { opacity: 1; }

  .card-icon {
    font-size: 1.75rem;
    flex-shrink: 0;
    line-height: 1;
  }
  .card-body { flex: 1; min-width: 0; }
  .card-body h3 {
    font-size: 0.9375rem;
    font-weight: 700;
    letter-spacing: -0.01em;
    margin-bottom: 0.2rem;
  }
  .card-body p {
    font-size: 0.8125rem;
    color: var(--text-muted);
  }
  .card-rss {
    color: var(--text-dim);
    flex-shrink: 0;
    transition: color 0.15s;
  }
  .community-card:hover .card-rss { color: var(--accent); }

  .communities-footer {
    margin-top: 1.5rem;
    display: flex;
    justify-content: flex-end;
  }
  .browse-all {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--text-muted);
    transition: color 0.15s;
  }
  .browse-all:hover { color: var(--red); }
  .browse-all svg { transition: transform 0.15s; }
  .browse-all:hover svg { transform: translateX(3px); }

  /* ‚îÄ‚îÄ About Hive ‚îÄ‚îÄ */
  .about {
    padding: 5rem 2rem;
    border-top: 1px solid var(--border);
    background: var(--surface);
  }
  .about-inner {
    max-width: 640px;
    margin: 0 auto;
  }
  .about-badge {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    background: var(--red-dim);
    border: 1px solid rgba(227, 19, 55, 0.2);
    border-radius: 999px;
    color: var(--red-light);
    font-size: 0.8rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 1.25rem;
  }
  .about h2 {
    font-size: clamp(1.75rem, 3.5vw, 2.75rem);
    font-weight: 800;
    letter-spacing: -0.025em;
    margin-bottom: 1.25rem;
  }
  .about h2 em {
    font-style: normal;
    color: var(--red);
  }
  .about p {
    font-size: 1.0625rem;
    color: var(--text-muted);
    line-height: 1.7;
    margin-bottom: 1rem;
  }
  .about-actions {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-top: 2rem;
    flex-wrap: wrap;
  }
  .btn-primary {
    display: inline-flex;
    align-items: center;
    padding: 0.65rem 1.25rem;
    background: var(--red);
    color: #fff;
    font-weight: 600;
    font-size: 0.9375rem;
    border-radius: 8px;
    transition: background 0.15s, transform 0.1s;
  }
  .btn-primary:hover { background: var(--red-light); transform: translateY(-1px); }
  .btn-ghost {
    font-size: 0.9375rem;
    font-weight: 500;
    color: var(--text-muted);
    transition: color 0.15s;
  }
  .btn-ghost:hover { color: var(--text); }

  /* ‚îÄ‚îÄ Responsive ‚îÄ‚îÄ */
  @media (max-width: 900px) {
    .hero {
      grid-template-columns: 1fr;
      gap: 3rem;
    }
    .hero-visual { display: none; }
    .community-grid { grid-template-columns: repeat(2, 1fr); }
  }

  @media (max-width: 560px) {
    .hero { padding: 3rem 1.25rem 2.5rem; }
    .communities, .about { padding: 3.5rem 1.25rem; }
    .community-grid { grid-template-columns: 1fr; }
    .pattern-list { gap: 0.75rem; }
    .pattern-divider { display: none; }
    .feed-builder { max-width: 100%; }
  }
</style>
